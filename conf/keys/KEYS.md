[//]: # (Для генерации PDF нужен установленный pandoc + latex. Команды сборки в файле generate.cmd)

# API единой авторизации
#### Версия 2.0

## Общие положения

### Состав документа
API единой авторизации (далее - *API*) предоставляет набор методов, необходимых для
авторизации пользователей в системах компании, а также методы управление пользователями.

#### Генерация ключевой пары
Для генерации ключевой пары приложения можно воспользоваться командами OpenSSL.

##### Создание ключей в формате PEM
###### V1
Для создания RSA-ключей в формате `PEM` можно выполнить следующие команды:
```bash
openssl genrsa -des3 -out encrypted.pem 2048
openssl rsa -in encrypted.pem -outform PEM -pubout -out public.pem
openssl rsa -in encrypted.pem -out private.pem -outform PEM
```

###### V2
Увеличение длины ключа: Увеличение длины ключа RSA делает его более устойчивым к взлому. 
2048 бит является надежным выбором на сегодняшний день, но для дополнительной безопасности можно рассмотреть 
использование ключа длиной 3072 или даже 4096 бит.

Использование -des3 обеспечивает шифрование закрытого ключа с помощью алгоритма 3DES, который считается достаточно безопасным, 
но есть более новые и более надежные алгоритмы. Например, можно использовать -aes256 для более сильного шифрования 
закрытого ключа:
```bash
openssl genrsa -aes256 -out encrypted.pem 4096
openssl rsa -in encrypted.pem -outform PEM -pubout -out public.pem
openssl rsa -in encrypted.pem -out private.pem -outform PEM
```
После выполнения этих команд будут сформированы файлы:

* `encrypted.pem` - зашифрованный закрытый ключ;
* `private.pem` - закрытый ключ без шифрования;
* `public.pem` - открытый ключ.

Так же, для генерации ключевых пар, используя ECDSA или Ed25519, можем использовать openssl команды. 
Ключевым отличием будет выбор алгоритма и, в случае ECDSA, выбор конкретной эллиптической кривой.

Генерация ECDSA ключей
Для ECDSA, первым шагом является выбор эллиптической кривой. 
Доступные кривые можно проверить с помощью команды openssl ecparam -list_curves. 
В качестве примера, давайте использовать кривую prime256v1, которая соответствует стандарту NIST P-256 и обеспечивает 
хороший баланс между безопасностью и производительностью.
```bash
# Генерация ECDSA ключевой пары
openssl ecparam -name prime256v1 -genkey -noout -out ecdsa_private.pem
openssl ec -in ecdsa_private.pem -pubout -out ecdsa_public.pem
```

Генерация Ed25519 ключей
Для генерации ключей, используя Ed25519, процесс несколько проще, поскольку не требуется выбирать кривую:
```bash
# Генерация Ed25519 ключевой пары
openssl genpkey -algorithm Ed25519 -out private.pem
openssl pkey -in private.pem -pubout -out public.pem
```
Криптосистемы на базе эллиптических кривых, как ECDSA и Ed25519, обеспечивают высокий уровень 
безопасности при меньшей длине ключей по сравнению с RSA, что делает их более эффективными 
во многих сценариях использования, включая высокопроизводительные и ограниченные по 
ресурсам системы.
